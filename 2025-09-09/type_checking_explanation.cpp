#include <iostream>
#include <typeinfo>

// íƒ€ì… ì²´í¬: ì»´íŒŒì¼ëŸ¬ vs OS ì—­í•  êµ¬ë¶„

int main() {
    std::cout << "=== íƒ€ì… ì²´í¬: ëˆ„ê°€ ì–¸ì œ í•˜ëŠ”ê°€? ===\n\n";
    
    // 1. ì»´íŒŒì¼ ì‹œì  vs ëŸ°íƒ€ì„
    std::cout << "1. ì»´íŒŒì¼ ì‹œì  vs ëŸ°íƒ€ì„:\n\n";
    
    std::cout << "   ğŸ”§ ì»´íŒŒì¼ ì‹œì  (Compile Time):\n";
    std::cout << "   â€¢ ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì… ì²´í¬\n";
    std::cout << "   â€¢ ë¬¸ë²• ì˜¤ë¥˜, íƒ€ì… ë¶ˆì¼ì¹˜ ê²€ì‚¬\n";
    std::cout << "   â€¢ ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë³€í™˜\n";
    std::cout << "   â€¢ íƒ€ì… ì •ë³´ëŠ” ëŒ€ë¶€ë¶„ ì œê±°ë¨\n\n";
    
    std::cout << "   ğŸƒ ëŸ°íƒ€ì„ (Runtime):\n";
    std::cout << "   â€¢ OSê°€ í”„ë¡œì„¸ìŠ¤ì™€ ë©”ëª¨ë¦¬ ê´€ë¦¬\n";
    std::cout << "   â€¢ íƒ€ì… ì •ë³´ëŠ” ê±°ì˜ ì—†ìŒ\n";
    std::cout << "   â€¢ ë‹¨ìˆœíˆ ë°”ì´íŠ¸ ë©ì–´ë¦¬ë¡œ ì·¨ê¸‰\n";
    std::cout << "   â€¢ ë©”ëª¨ë¦¬ ì£¼ì†Œì™€ í¬ê¸°ë§Œ ì•Œê³  ìˆìŒ\n\n";
    
    // 2. ì‹¤ì œ ì˜ˆì œë¡œ í™•ì¸
    int arr[5] = {1, 2, 3, 4, 5};
    
    std::cout << "2. ì»´íŒŒì¼ ì‹œì ì˜ íƒ€ì… ì²´í¬:\n";
    std::cout << "   int arr[5] = {1, 2, 3, 4, 5};\n\n";
    
    // ì»´íŒŒì¼ëŸ¬ê°€ ë§‰ëŠ” ì½”ë“œë“¤ (ì£¼ì„ ì²˜ë¦¬)
    std::cout << "   ì»´íŒŒì¼ëŸ¬ê°€ ë§‰ëŠ” ì½”ë“œë“¤:\n";
    std::cout << "   // int (*p)[5] = arr;        // âŒ íƒ€ì… ë¶ˆì¼ì¹˜\n";
    std::cout << "   // int (*p)[3] = &arr;       // âŒ í¬ê¸° ë‹¤ë¦„\n";
    std::cout << "   // float* fp = arr;          // âŒ íƒ€ì… ë‹¤ë¦„\n";
    std::cout << "   â†’ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì—ëŸ¬ ë°œìƒ!\n\n";
    
    // 3. ëŸ°íƒ€ì„ì—ì„œ OSê°€ ë³´ëŠ” ê²ƒ
    std::cout << "3. ëŸ°íƒ€ì„ì—ì„œ OSê°€ ë³´ëŠ” ê²ƒ:\n";
    
    int* ptr = arr;  // ì»´íŒŒì¼ëŸ¬ í—ˆìš©
    void* voidPtr = arr;  // ì»´íŒŒì¼ëŸ¬ í—ˆìš©
    
    std::cout << "   ë©”ëª¨ë¦¬ ì£¼ì†Œ: " << ptr << "\n";
    std::cout << "   OS ê´€ì ì—ì„œëŠ” ê·¸ëƒ¥ 'ì£¼ì†Œ " << ptr << "ì— 20ë°”ì´íŠ¸ í• ë‹¹'\n";
    std::cout << "   íƒ€ì…ì´ intë“  floatë“  OSëŠ” ëª¨ë¦„!\n\n";
    
    // 4. ë©”ëª¨ë¦¬ ë¤í”„ë¡œ í™•ì¸
    std::cout << "4. ë©”ëª¨ë¦¬ ë‚´ìš© (OS ê´€ì ):\n";
    std::cout << "   ì£¼ì†Œ        ë°”ì´íŠ¸ ë‚´ìš©\n";
    std::cout << "   --------   ------------\n";
    
    unsigned char* bytePtr = (unsigned char*)arr;
    for(int i = 0; i < 20; i += 4) {
        std::cout << "   " << (void*)(bytePtr + i) << "   ";
        for(int j = 0; j < 4; j++) {
            printf("%02X ", bytePtr[i + j]);
        }
        std::cout << "(int ê°’: " << *(int*)(bytePtr + i) << ")\n";
    }
    std::cout << "   OSëŠ” ì´ê²ƒì„ ê·¸ëƒ¥ 'ë°”ì´íŠ¸ ë©ì–´ë¦¬'ë¡œë§Œ ë´„\n\n";
    
    // 5. íƒ€ì… ì •ë³´ê°€ ë‚¨ì•„ìˆëŠ” ê²½ìš° (ì˜ˆì™¸ì )
    std::cout << "5. ëŸ°íƒ€ì„ì— íƒ€ì… ì •ë³´ê°€ ë‚¨ì•„ìˆëŠ” ê²½ìš°:\n\n";
    
    std::cout << "   RTTI (Run-Time Type Information) - C++:\n";
    int x = 42;
    int* intPtr = &x;
    void* genericPtr = intPtr;
    
    std::cout << "   typeid(*intPtr).name() = " << typeid(*intPtr).name() << "\n";
    std::cout << "   â†’ ì»´íŒŒì¼ëŸ¬ê°€ íŠ¹ë³„íˆ íƒ€ì… ì •ë³´ë¥¼ ë‚¨ê¹€\n\n";
    
    std::cout << "   ê°€ìƒ í•¨ìˆ˜ í…Œì´ë¸” (vtable) - ë‹¤í˜•ì„±:\n";
    std::cout << "   virtual í•¨ìˆ˜ê°€ ìˆëŠ” í´ë˜ìŠ¤ëŠ” íƒ€ì… ì •ë³´ ìœ ì§€\n";
    std::cout << "   í•˜ì§€ë§Œ ì´ê²ƒë„ ì»´íŒŒì¼ëŸ¬ê°€ ë§Œë“  ê²ƒ!\n\n";
    
    // 6. ì‹¤ì œ ì‹œìŠ¤í…œ ê´€ì 
    std::cout << "6. ì‹¤ì œ ì‹œìŠ¤í…œì˜ ì—­í•  ë¶„ë‹´:\n\n";
    
    std::cout << "   ğŸ“ ì»´íŒŒì¼ëŸ¬ (gcc, clang, MSVC):\n";
    std::cout << "   â€¢ íƒ€ì… ì²´í¬ì™€ ë³€í™˜\n";
    std::cout << "   â€¢ ë©”ëª¨ë¦¬ ë ˆì´ì•„ì›ƒ ê²°ì •\n";
    std::cout << "   â€¢ ìµœì í™”\n";
    std::cout << "   â€¢ ê¸°ê³„ì–´ ìƒì„±\n\n";
    
    std::cout << "   ğŸ–¥ï¸ OS (Linux, Windows, macOS):\n";
    std::cout << "   â€¢ ê°€ìƒ ë©”ëª¨ë¦¬ ê´€ë¦¬\n";
    std::cout << "   â€¢ í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§\n";
    std::cout << "   â€¢ ì‹œìŠ¤í…œ ì½œ ì²˜ë¦¬\n";
    std::cout << "   â€¢ í•˜ë“œì›¨ì–´ ìì› ê´€ë¦¬\n\n";
    
    std::cout << "   ğŸ’» CPU:\n";
    std::cout << "   â€¢ ëª…ë ¹ì–´ ì‹¤í–‰\n";
    std::cout << "   â€¢ ë ˆì§€ìŠ¤í„° ê´€ë¦¬\n";
    std::cout << "   â€¢ ë©”ëª¨ë¦¬ ì•¡ì„¸ìŠ¤\n";
    std::cout << "   â€¢ íƒ€ì…? ê·¸ê²Œ ë­ì£ ? ê·¸ëƒ¥ ë¹„íŠ¸ì¼ ë¿\n\n";
    
    // 7. í¬ì¸í„° íƒ€ì… ì²´í¬ ì‹¤í—˜
    std::cout << "7. ê°•ì œ ìºìŠ¤íŒ… ì‹¤í—˜ (ëŸ°íƒ€ì„ì—ëŠ” ë¬¸ì œì—†ìŒ):\n";
    
    int number = 0x41424344;  // ASCII 'ABCD'
    
    std::cout << "   int number = 0x41424344;\n";
    std::cout << "   intë¡œ í•´ì„:    " << number << "\n";
    std::cout << "   char*ë¡œ í•´ì„:  ";
    
    char* charPtr = (char*)&number;
    for(int i = 0; i < 4; i++) {
        if(charPtr[i] >= 32 && charPtr[i] <= 126) {
            std::cout << charPtr[i];
        } else {
            std::cout << ".";
        }
    }
    std::cout << "\n";
    
    std::cout << "   float*ë¡œ í•´ì„: " << *(float*)&number << "\n";
    std::cout << "   â†’ ëŸ°íƒ€ì„ì—ëŠ” ëª¨ë‘ ë™ì‘! OSëŠ” ì‹ ê²½ ì•ˆì”€\n\n";
    
    // 8. ë””ë²„ê±°ì—ì„œ ë³´ëŠ” ê²ƒ
    std::cout << "8. ë””ë²„ê±° (gdb, lldb)ëŠ” ì–´ë–»ê²Œ íƒ€ì…ì„ ì•„ëŠ”ê°€?\n";
    std::cout << "   ë””ë²„ê±°ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ë‚¨ê¸´ ë””ë²„ê·¸ ì •ë³´ ì‚¬ìš©:\n";
    std::cout << "   â€¢ -g ì˜µì…˜ìœ¼ë¡œ ì»´íŒŒì¼í•˜ë©´ DWARF ì •ë³´ í¬í•¨\n";
    std::cout << "   â€¢ ë³€ìˆ˜ëª…, íƒ€ì… ì •ë³´, ì†ŒìŠ¤ ìœ„ì¹˜ ë“±\n";
    std::cout << "   â€¢ ì´ê²ƒë„ OSê°€ ì•„ë‹Œ ì»´íŒŒì¼ëŸ¬ê°€ ë§Œë“  ê²ƒ!\n\n";
    
    std::cout << "=== ê²°ë¡  ===\n";
    std::cout << "âŒ OSê°€ íƒ€ì…ì„ ê³„ì† ë°”ë¼ë³¸ë‹¤? NO!\n";
    std::cout << "âœ… ì»´íŒŒì¼ëŸ¬ê°€ ì»´íŒŒì¼ ì‹œì ì— íƒ€ì… ì²´í¬!\n\n";
    
    std::cout << "ì—­í•  ë¶„ë‹´:\n";
    std::cout << "â€¢ ì»´íŒŒì¼ëŸ¬: íƒ€ì… ì•ˆì „ì„±, ë¬¸ë²• ì²´í¬\n";
    std::cout << "â€¢ OS: ë©”ëª¨ë¦¬ ê´€ë¦¬, í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬\n";
    std::cout << "â€¢ CPU: ëª…ë ¹ì–´ ì‹¤í–‰ (íƒ€ì… ë¬´ê´€)\n\n";
    
    std::cout << "ëŸ°íƒ€ì„ì—ëŠ” ëŒ€ë¶€ë¶„ 'ê·¸ëƒ¥ ë°”ì´íŠ¸'ì¼ ë¿!\n";
    
    return 0;
}